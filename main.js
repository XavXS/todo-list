(()=>{"use strict";class t{#t;constructor(t,e){this._title=t,this._desc=e,this.#t=[]}get title(){return this._title}set title(t){this._name=t}get desc(){return this._desc}set desc(t){this._desc=t}addTask(t){t?this.#t.push(t):this.#t.push(new t("New Task","Enter Description",new Date,1))}getTasks(){return this.#t}}class e{constructor(t,e,n,r){this._title=t,this._desc=e,this._due=n,this._prio=r}get title(){return this._title}set title(t){this._title=t}get desc(){return this._desc}set desc(t){this._desc=t}get due(){return this._due}set due(t){this._due=t}get prio(){return this._prio}set prio(t){this._prio=t}}Math.pow(10,8);var n=36e5;function r(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function o(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function a(t,e){var n;r(1,arguments);var a=o(null!==(n=null==e?void 0:e.additionalDigits)&&void 0!==n?n:2);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var i,s=u(t);if(s.date){var c=d(s.date,a);i=f(c.restDateString,c.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l,p=i.getTime(),m=0;if(s.time&&(m=g(s.time),isNaN(m)))return new Date(NaN);if(!s.timezone){var v=new Date(p+m),y=new Date(0);return y.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),y.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),y}return l=h(s.timezone),isNaN(l)?new Date(NaN):new Date(p+m+l)}var i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},s=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(t){var e,n={},r=t.split(i.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?e=r[0]:(n.date=r[0],e=r[1],i.timeZoneDelimiter.test(n.date)&&(n.date=t.split(i.timeZoneDelimiter)[0],e=t.substr(n.date.length,t.length))),e){var o=i.timezone.exec(e);o?(n.time=e.replace(o[1],""),n.timezone=o[1]):n.time=e}return n}function d(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var o=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?o:100*a,restDateString:t.slice((r[1]||r[2]).length)}}function f(t,e){if(null===e)return new Date(NaN);var n=t.match(s);if(!n)return new Date(NaN);var r=!!n[4],o=p(n[1]),a=p(n[2])-1,i=p(n[3]),c=p(n[4]),l=p(n[5])-1;if(r)return function(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}(0,c,l)?function(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var o=7*(e-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+o),r}(e,c,l):new Date(NaN);var u=new Date(0);return function(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(v[e]||(y(t)?29:28))}(e,a,i)&&function(t,e){return e>=1&&e<=(y(t)?366:365)}(e,o)?(u.setUTCFullYear(e,a,Math.max(o,i)),u):new Date(NaN)}function p(t){return t?parseInt(t):1}function g(t){var e=t.match(c);if(!e)return NaN;var r=m(e[1]),o=m(e[2]),a=m(e[3]);return function(t,e,n){return 24===t?0===e&&0===n:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}(r,o,a)?r*n+6e4*o+1e3*a:NaN}function m(t){return t&&parseFloat(t.replace(",","."))||0}function h(t){if("Z"===t)return 0;var e=t.match(l);if(!e)return 0;var r="+"===e[1]?-1:1,o=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return function(t,e){return e>=0&&e<=59}(0,a)?r*(o*n+6e4*a):NaN}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function y(t){return t%400==0||t%4==0&&t%100!=0}let b,N,S,k=[],w=[],D=[];function _(){localStorage.setItem("tasks",JSON.stringify(w)),console.log(JSON.stringify(w))}function E(){return w}function T(t){const e=w.indexOf(t);e>-1&&w.splice(e,1),_()}function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function q(t){r(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||"object"===C(t)&&"[object Date]"===e?new Date(t.getTime()):"number"==typeof t||"[object Number]"===e?new Date(t):("string"!=typeof t&&"[object String]"!==e||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function L(t){r(1,arguments);var e=q(t);return e.setHours(0,0,0,0),e}function x(t,e){r(2,arguments);var n=L(t),o=L(e);return n.getTime()===o.getTime()}function j(){let t=document.querySelector("#content");t.appendChild(b),t.appendChild(N),t.appendChild(S),U(document.querySelector("#day"))}function U(t){document.querySelectorAll(".time").forEach((t=>t.classList.remove("active"))),t.classList.add("active"),function(t){let e=E();switch(N.textContent="",t){case"day":let n=e.filter((t=>function(t){return r(1,arguments),x(t,Date.now())}(t.due))).sort(((t,e)=>e.due-t.due));n.forEach((t=>{N.appendChild(function(t){let e=document.createElement("div");return e.innerHTML="<div class='basic'><div class='info'><input type='text'><input type='date'></div><div class='actions'><input type='checkbox' class='expand'><button class='delete'>âœ–</button></div></div><div class='details><div class='priorities'><button class='priority'>1</button><button class='priority'>2</button><button class='priority'>3</button><button class='priority'>4</button><button class='priority'>5</button></div><textarea class='description'></textarea></div>",e.querySelector(".expand").addEventListener("change",(t=>{t.target.checked?console.log("expand checked"):console.log("expand unchecked")})),e.querySelector(".delete").addEventListener("click",(n=>{e.remove(),T(t)})),e.querySelector(".details"),e}(t))}));break;case"week":case"month":case"year":case"all":break;default:throw"could not find"+t+"!"}}(t.id)}function I(t){document.querySelectorAll(".tab").forEach((t=>{t.classList.remove("active")})),t.classList.add("active")}!function(){console.log("retrieving projects data...");let n=JSON.parse(localStorage.getItem("projects"));n?(console.log("found projects data:\n"+n),n.forEach((n=>{console.log("found project data:\n"+n);let r=new t(n.title,n.desc);n.tasks.forEach((t=>{console.log("found task data:\n"+t),r.addTask(new e(t._title,t._desc,a(t._due),t._prio))})),console.log("assembled project:\n"+r),k.push(r)}))):console.log("projects data could not be found")}(),function(){let t=JSON.parse(localStorage.getItem("tasks"));t?(console.log("tasks found:\n"+t),t.forEach((t=>{w.push(new e(t._title,t._desc,a(t._due),t._prio))})),console.log(w)):console.log("tasks not found")}(),function(){let t=JSON.parse(localStorage.getItem("notes"));t&&t.forEach((t=>{D.push(t._title,t._desc,t._color)}))}(),document.querySelector("#tasks-tab").addEventListener("click",(t=>{I(t.target),j()})),document.querySelector("#projects-tab").addEventListener("click",(t=>{I(t.target),document.querySelector("#content").textContent=""})),document.querySelector("#notes-tab").addEventListener("click",(t=>{I(t.target),document.querySelector("#content").textContent=""})),I(document.querySelector("#tasks-tab")),function(){let t=document.createElement("div");t.id="times",t.innerHTML="<button id='day' class='time'>Day</button><button id='week' class='time'>Week</button><button id='month' class='time'>Month</button><button id='year' class='time'>Year</button><button id='all' class='time'>All</button>",t.querySelector("#day").addEventListener("click",(t=>U(t.target))),t.querySelector("#week").addEventListener("click",(t=>U(t.target))),t.querySelector("#month").addEventListener("click",(t=>U(t.target))),t.querySelector("#year").addEventListener("click",(t=>U(t.target))),t.querySelector("#all").addEventListener("click",(t=>U(t.target))),b=t}(),function(){let t=document.createElement("div");t.id="task-list",N=t}(),function(){let t=document.createElement("button");t.id="add-btn",t.textContent="+",t.addEventListener("click",(()=>(console.log("creating task.."),w.push(new e("New Task","Enter Description",new Date,1)),console.log(w),void _()))),S=t}(),j()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC1mb3JyZWFsLy4vc3JjL21vZHVsZXMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QtZm9ycmVhbC8uL3NyYy9tb2R1bGVzL3Rhc2suanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LWZvcnJlYWwvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2NvbnN0YW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QtZm9ycmVhbC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LWZvcnJlYWwvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1mb3JyZWFsLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9wYXJzZUlTTy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QtZm9ycmVhbC8uL3NyYy9tb2R1bGVzL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LWZvcnJlYWwvLi9zcmMvbW9kdWxlcy91aS90YXNrVUkuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LWZvcnJlYWwvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3RvRGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QtZm9ycmVhbC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZkRheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QtZm9ycmVhbC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNTYW1lRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1mb3JyZWFsLy4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1RvZGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC1mb3JyZWFsLy4vc3JjL21vZHVsZXMvdWkvdWkuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LWZvcnJlYWwvLi9zcmMvbW9kdWxlcy91aS9wcm9qZWN0VUkuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LWZvcnJlYWwvLi9zcmMvbW9kdWxlcy91aS9ub3RlVUkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHRhc2sgZnJvbSAnLi90YXNrJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHByb2plY3Qge1xuICAgIFxuICAgICN0YXNrcztcblxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjKSB7XG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuX2Rlc2MgPSBkZXNjO1xuICAgICAgICB0aGlzLiN0YXNrcyA9IFtdO1xuICAgIH1cblxuICAgIGdldCB0aXRsZSgpIHsgcmV0dXJuIHRoaXMuX3RpdGxlOyB9XG4gICAgc2V0IHRpdGxlKG5ld1RpdGxlKSB7IHRoaXMuX25hbWUgPSBuZXdUaXRsZTsgfVxuXG4gICAgZ2V0IGRlc2MoKSB7IHJldHVybiB0aGlzLl9kZXNjOyB9XG4gICAgc2V0IGRlc2MobmV3RGVzYykgeyB0aGlzLl9kZXNjID0gbmV3RGVzYzsgfVxuXG4gICAgYWRkVGFzayh0YXNrKSB7XG4gICAgICAgIGlmKHRhc2spIHtcbiAgICAgICAgICAgIHRoaXMuI3Rhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jdGFza3MucHVzaChcbiAgICAgICAgICAgIG5ldyB0YXNrKFxuICAgICAgICAgICAgICAgICdOZXcgVGFzaycsXG4gICAgICAgICAgICAgICAgJ0VudGVyIERlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgICAgICBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXRUYXNrcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3Rhc2tzO1xuICAgIH1cbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgdGFzayB7XG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2MsIGR1ZSwgcHJpbykge1xuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLl9kZXNjID0gZGVzYztcbiAgICAgICAgdGhpcy5fZHVlID0gZHVlO1xuICAgICAgICB0aGlzLl9wcmlvID0gcHJpbztcbiAgICB9XG5cbiAgICBnZXQgdGl0bGUoKSB7IHJldHVybiB0aGlzLl90aXRsZTsgfVxuICAgIHNldCB0aXRsZShuZXdUaXRsZSkgeyB0aGlzLl90aXRsZSA9IG5ld1RpdGxlOyB9O1xuXG4gICAgZ2V0IGRlc2MoKSB7IHJldHVybiB0aGlzLl9kZXNjOyB9XG4gICAgc2V0IGRlc2MobmV3RGVzYykgeyB0aGlzLl9kZXNjID0gbmV3RGVzYzsgfVxuXG4gICAgZ2V0IGR1ZSgpIHsgcmV0dXJuIHRoaXMuX2R1ZTsgfVxuICAgIHNldCBkdWUobmV3RHVlKSB7IHRoaXMuX2R1ZSA9IG5ld0R1ZTsgfVxuXG4gICAgZ2V0IHByaW8oKSB7IHJldHVybiB0aGlzLl9wcmlvOyB9XG4gICAgc2V0IHByaW8obmV3UHJpbykgeyB0aGlzLl9wcmlvID0gbmV3UHJpbzsgfTtcbn0iLCIvKipcbiAqIERheXMgaW4gMSB3ZWVrLlxuICpcbiAqIEBuYW1lIGRheXNJbldlZWtcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cbmV4cG9ydCB2YXIgZGF5c0luV2VlayA9IDc7XG4vKipcbiAqIERheXMgaW4gMSB5ZWFyXG4gKiBPbmUgeWVhcnMgZXF1YWxzIDM2NS4yNDI1IGRheXMgYWNjb3JkaW5nIHRvIHRoZSBmb3JtdWxhOlxuICpcbiAqID4gTGVhcCB5ZWFyIG9jY3VyZXMgZXZlcnkgNCB5ZWFycywgZXhjZXB0IGZvciB5ZWFycyB0aGF0IGFyZSBkaXZpc2FibGUgYnkgMTAwIGFuZCBub3QgZGl2aXNhYmxlIGJ5IDQwMC5cbiAqID4gMSBtZWFuIHllYXIgPSAoMzY1KzEvNC0xLzEwMCsxLzQwMCkgZGF5cyA9IDM2NS4yNDI1IGRheXNcbiAqXG4gKiBAbmFtZSBkYXlzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgZGF5c0luWWVhciA9IDM2NS4yNDI1O1xuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgdGltZS5cbiAqXG4gKiBAbmFtZSBtYXhUaW1lXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWF4VGltZSA9IE1hdGgucG93KDEwLCA4KSAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XG4vKipcbiAqIE1pbGxpc2Vjb25kcyBpbiAxIG1pbnV0ZVxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luTWludXRlXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWlsbGlzZWNvbmRzSW5NaW51dGUgPSA2MDAwMDtcbi8qKlxuICogTWlsbGlzZWNvbmRzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luSG91clxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIG1pbGxpc2Vjb25kc0luSG91ciA9IDM2MDAwMDA7XG4vKipcbiAqIE1pbGxpc2Vjb25kcyBpbiAxIHNlY29uZFxuICpcbiAqIEBuYW1lIG1pbGxpc2Vjb25kc0luU2Vjb25kXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWlsbGlzZWNvbmRzSW5TZWNvbmQgPSAxMDAwO1xuLyoqXG4gKiBNaW5pbXVtIGFsbG93ZWQgdGltZS5cbiAqXG4gKiBAbmFtZSBtaW5UaW1lXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbWluVGltZSA9IC1tYXhUaW1lO1xuLyoqXG4gKiBNaW51dGVzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIG1pbnV0ZXNJbkhvdXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtaW51dGVzSW5Ib3VyID0gNjA7XG4vKipcbiAqIE1vbnRocyBpbiAxIHF1YXJ0ZXJcbiAqXG4gKiBAbmFtZSBtb250aHNJblF1YXJ0ZXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBtb250aHNJblF1YXJ0ZXIgPSAzO1xuLyoqXG4gKiBNb250aHMgaW4gMSB5ZWFyXG4gKlxuICogQG5hbWUgbW9udGhzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgbW9udGhzSW5ZZWFyID0gMTI7XG4vKipcbiAqIFF1YXJ0ZXJzIGluIDEgeWVhclxuICpcbiAqIEBuYW1lIHF1YXJ0ZXJzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgcXVhcnRlcnNJblllYXIgPSA0O1xuLyoqXG4gKiBTZWNvbmRzIGluIDEgaG91clxuICpcbiAqIEBuYW1lIHNlY29uZHNJbkhvdXJcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBzZWNvbmRzSW5Ib3VyID0gMzYwMDtcbi8qKlxuICogU2Vjb25kcyBpbiAxIG1pbnV0ZVxuICpcbiAqIEBuYW1lIHNlY29uZHNJbk1pbnV0ZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIHNlY29uZHNJbk1pbnV0ZSA9IDYwO1xuLyoqXG4gKiBTZWNvbmRzIGluIDEgZGF5XG4gKlxuICogQG5hbWUgc2Vjb25kc0luRGF5XG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgc2Vjb25kc0luRGF5ID0gc2Vjb25kc0luSG91ciAqIDI0O1xuLyoqXG4gKiBTZWNvbmRzIGluIDEgd2Vla1xuICpcbiAqIEBuYW1lIHNlY29uZHNJbldlZWtcbiAqIEBjb25zdGFudFxuICogQHR5cGUge251bWJlcn1cbiAqIEBkZWZhdWx0XG4gKi9cblxuZXhwb3J0IHZhciBzZWNvbmRzSW5XZWVrID0gc2Vjb25kc0luRGF5ICogNztcbi8qKlxuICogU2Vjb25kcyBpbiAxIHllYXJcbiAqXG4gKiBAbmFtZSBzZWNvbmRzSW5ZZWFyXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgc2Vjb25kc0luWWVhciA9IHNlY29uZHNJbkRheSAqIGRheXNJblllYXI7XG4vKipcbiAqIFNlY29uZHMgaW4gMSBtb250aFxuICpcbiAqIEBuYW1lIHNlY29uZHNJbk1vbnRoXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAZGVmYXVsdFxuICovXG5cbmV4cG9ydCB2YXIgc2Vjb25kc0luTW9udGggPSBzZWNvbmRzSW5ZZWFyIC8gMTI7XG4vKipcbiAqIFNlY29uZHMgaW4gMSBxdWFydGVyXG4gKlxuICogQG5hbWUgc2Vjb25kc0luUXVhcnRlclxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGRlZmF1bHRcbiAqL1xuXG5leHBvcnQgdmFyIHNlY29uZHNJblF1YXJ0ZXIgPSBzZWNvbmRzSW5Nb250aCAqIDM7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgeyBtaWxsaXNlY29uZHNJbkhvdXIsIG1pbGxpc2Vjb25kc0luTWludXRlIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHBhcnNlSVNPXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFBhcnNlIElTTyBzdHJpbmdcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFBhcnNlIHRoZSBnaXZlbiBzdHJpbmcgaW4gSVNPIDg2MDEgZm9ybWF0IGFuZCByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBGdW5jdGlvbiBhY2NlcHRzIGNvbXBsZXRlIElTTyA4NjAxIGZvcm1hdHMgYXMgd2VsbCBhcyBwYXJ0aWFsIGltcGxlbWVudGF0aW9ucy5cbiAqIElTTyA4NjAxOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzbid0IGEgc3RyaW5nLCB0aGUgZnVuY3Rpb24gY2Fubm90IHBhcnNlIHRoZSBzdHJpbmcgb3JcbiAqIHRoZSB2YWx1ZXMgYXJlIGludmFsaWQsIGl0IHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7MHwxfDJ9IFtvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHM9Ml0gLSB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdFxuICogQHJldHVybnMge0RhdGV9IHRoZSBwYXJzZWQgZGF0ZSBpbiB0aGUgbG9jYWwgdGltZSB6b25lXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHNgIG11c3QgYmUgMCwgMSBvciAyXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgc3RyaW5nICcyMDE0LTAyLTExVDExOjMwOjMwJyB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gcGFyc2VJU08oJzIwMTQtMDItMTFUMTE6MzA6MzAnKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCBzdHJpbmcgJyswMjAxNDEwMScgdG8gZGF0ZSxcbiAqIC8vIGlmIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0IGlzIDE6XG4gKiBjb25zdCByZXN1bHQgPSBwYXJzZUlTTygnKzAyMDE0MTAxJywgeyBhZGRpdGlvbmFsRGlnaXRzOiAxIH0pXG4gKiAvLz0+IEZyaSBBcHIgMTEgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlSVNPKGFyZ3VtZW50LCBvcHRpb25zKSB7XG4gIHZhciBfb3B0aW9ucyRhZGRpdGlvbmFsRGk7XG5cbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhZGRpdGlvbmFsRGlnaXRzID0gdG9JbnRlZ2VyKChfb3B0aW9ucyRhZGRpdGlvbmFsRGkgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0cykgIT09IG51bGwgJiYgX29wdGlvbnMkYWRkaXRpb25hbERpICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRhZGRpdGlvbmFsRGkgOiAyKTtcblxuICBpZiAoYWRkaXRpb25hbERpZ2l0cyAhPT0gMiAmJiBhZGRpdGlvbmFsRGlnaXRzICE9PSAxICYmIGFkZGl0aW9uYWxEaWdpdHMgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYWRkaXRpb25hbERpZ2l0cyBtdXN0IGJlIDAsIDEgb3IgMicpO1xuICB9XG5cbiAgaWYgKCEodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpID09PSAnW29iamVjdCBTdHJpbmddJykpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxuXG4gIHZhciBkYXRlU3RyaW5ncyA9IHNwbGl0RGF0ZVN0cmluZyhhcmd1bWVudCk7XG4gIHZhciBkYXRlO1xuXG4gIGlmIChkYXRlU3RyaW5ncy5kYXRlKSB7XG4gICAgdmFyIHBhcnNlWWVhclJlc3VsdCA9IHBhcnNlWWVhcihkYXRlU3RyaW5ncy5kYXRlLCBhZGRpdGlvbmFsRGlnaXRzKTtcbiAgICBkYXRlID0gcGFyc2VEYXRlKHBhcnNlWWVhclJlc3VsdC5yZXN0RGF0ZVN0cmluZywgcGFyc2VZZWFyUmVzdWx0LnllYXIpO1xuICB9XG5cbiAgaWYgKCFkYXRlIHx8IGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG5cbiAgdmFyIHRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpO1xuICB2YXIgdGltZSA9IDA7XG4gIHZhciBvZmZzZXQ7XG5cbiAgaWYgKGRhdGVTdHJpbmdzLnRpbWUpIHtcbiAgICB0aW1lID0gcGFyc2VUaW1lKGRhdGVTdHJpbmdzLnRpbWUpO1xuXG4gICAgaWYgKGlzTmFOKHRpbWUpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGF0ZVN0cmluZ3MudGltZXpvbmUpIHtcbiAgICBvZmZzZXQgPSBwYXJzZVRpbWV6b25lKGRhdGVTdHJpbmdzLnRpbWV6b25lKTtcblxuICAgIGlmIChpc05hTihvZmZzZXQpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRpcnR5RGF0ZSA9IG5ldyBEYXRlKHRpbWVzdGFtcCArIHRpbWUpOyAvLyBqcyBwYXJzZWQgc3RyaW5nIGFzc3VtaW5nIGl0J3MgaW4gVVRDIHRpbWV6b25lXG4gICAgLy8gYnV0IHdlIG5lZWQgaXQgdG8gYmUgcGFyc2VkIGluIG91ciB0aW1lem9uZVxuICAgIC8vIHNvIHdlIHVzZSB1dGMgdmFsdWVzIHRvIGJ1aWxkIGRhdGUgaW4gb3VyIHRpbWV6b25lLlxuICAgIC8vIFllYXIgdmFsdWVzIGZyb20gMCB0byA5OSBtYXAgdG8gdGhlIHllYXJzIDE5MDAgdG8gMTk5OVxuICAgIC8vIHNvIHNldCB5ZWFyIGV4cGxpY2l0bHkgd2l0aCBzZXRGdWxsWWVhci5cblxuICAgIHZhciByZXN1bHQgPSBuZXcgRGF0ZSgwKTtcbiAgICByZXN1bHQuc2V0RnVsbFllYXIoZGlydHlEYXRlLmdldFVUQ0Z1bGxZZWFyKCksIGRpcnR5RGF0ZS5nZXRVVENNb250aCgpLCBkaXJ0eURhdGUuZ2V0VVRDRGF0ZSgpKTtcbiAgICByZXN1bHQuc2V0SG91cnMoZGlydHlEYXRlLmdldFVUQ0hvdXJzKCksIGRpcnR5RGF0ZS5nZXRVVENNaW51dGVzKCksIGRpcnR5RGF0ZS5nZXRVVENTZWNvbmRzKCksIGRpcnR5RGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lICsgb2Zmc2V0KTtcbn1cbnZhciBwYXR0ZXJucyA9IHtcbiAgZGF0ZVRpbWVEZWxpbWl0ZXI6IC9bVCBdLyxcbiAgdGltZVpvbmVEZWxpbWl0ZXI6IC9bWiBdL2ksXG4gIHRpbWV6b25lOiAvKFtaKy1dLiopJC9cbn07XG52YXIgZGF0ZVJlZ2V4ID0gL14tPyg/OihcXGR7M30pfChcXGR7Mn0pKD86LT8oXFxkezJ9KSk/fFcoXFxkezJ9KSg/Oi0/KFxcZHsxfSkpP3wpJC87XG52YXIgdGltZVJlZ2V4ID0gL14oXFxkezJ9KD86Wy4sXVxcZCopPykoPzo6PyhcXGR7Mn0oPzpbLixdXFxkKik/KSk/KD86Oj8oXFxkezJ9KD86Wy4sXVxcZCopPykpPyQvO1xudmFyIHRpbWV6b25lUmVnZXggPSAvXihbKy1dKShcXGR7Mn0pKD86Oj8oXFxkezJ9KSk/JC87XG5cbmZ1bmN0aW9uIHNwbGl0RGF0ZVN0cmluZyhkYXRlU3RyaW5nKSB7XG4gIHZhciBkYXRlU3RyaW5ncyA9IHt9O1xuICB2YXIgYXJyYXkgPSBkYXRlU3RyaW5nLnNwbGl0KHBhdHRlcm5zLmRhdGVUaW1lRGVsaW1pdGVyKTtcbiAgdmFyIHRpbWVTdHJpbmc7IC8vIFRoZSByZWdleCBtYXRjaCBzaG91bGQgb25seSByZXR1cm4gYXQgbWF4aW11bSB0d28gYXJyYXkgZWxlbWVudHMuXG4gIC8vIFtkYXRlXSwgW3RpbWVdLCBvciBbZGF0ZSwgdGltZV0uXG5cbiAgaWYgKGFycmF5Lmxlbmd0aCA+IDIpIHtcbiAgICByZXR1cm4gZGF0ZVN0cmluZ3M7XG4gIH1cblxuICBpZiAoLzovLnRlc3QoYXJyYXlbMF0pKSB7XG4gICAgdGltZVN0cmluZyA9IGFycmF5WzBdO1xuICB9IGVsc2Uge1xuICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBhcnJheVswXTtcbiAgICB0aW1lU3RyaW5nID0gYXJyYXlbMV07XG5cbiAgICBpZiAocGF0dGVybnMudGltZVpvbmVEZWxpbWl0ZXIudGVzdChkYXRlU3RyaW5ncy5kYXRlKSkge1xuICAgICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IGRhdGVTdHJpbmcuc3BsaXQocGF0dGVybnMudGltZVpvbmVEZWxpbWl0ZXIpWzBdO1xuICAgICAgdGltZVN0cmluZyA9IGRhdGVTdHJpbmcuc3Vic3RyKGRhdGVTdHJpbmdzLmRhdGUubGVuZ3RoLCBkYXRlU3RyaW5nLmxlbmd0aCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRpbWVTdHJpbmcpIHtcbiAgICB2YXIgdG9rZW4gPSBwYXR0ZXJucy50aW1lem9uZS5leGVjKHRpbWVTdHJpbmcpO1xuXG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZy5yZXBsYWNlKHRva2VuWzFdLCAnJyk7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lem9uZSA9IHRva2VuWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGF0ZVN0cmluZ3M7XG59XG5cbmZ1bmN0aW9uIHBhcnNlWWVhcihkYXRlU3RyaW5nLCBhZGRpdGlvbmFsRGlnaXRzKSB7XG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJ14oPzooXFxcXGR7NH18WystXVxcXFxkeycgKyAoNCArIGFkZGl0aW9uYWxEaWdpdHMpICsgJ30pfChcXFxcZHsyfXxbKy1dXFxcXGR7JyArICgyICsgYWRkaXRpb25hbERpZ2l0cykgKyAnfSkkKScpO1xuICB2YXIgY2FwdHVyZXMgPSBkYXRlU3RyaW5nLm1hdGNoKHJlZ2V4KTsgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXJcblxuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4ge1xuICAgIHllYXI6IE5hTixcbiAgICByZXN0RGF0ZVN0cmluZzogJydcbiAgfTtcbiAgdmFyIHllYXIgPSBjYXB0dXJlc1sxXSA/IHBhcnNlSW50KGNhcHR1cmVzWzFdKSA6IG51bGw7XG4gIHZhciBjZW50dXJ5ID0gY2FwdHVyZXNbMl0gPyBwYXJzZUludChjYXB0dXJlc1syXSkgOiBudWxsOyAvLyBlaXRoZXIgeWVhciBvciBjZW50dXJ5IGlzIG51bGwsIG5vdCBib3RoXG5cbiAgcmV0dXJuIHtcbiAgICB5ZWFyOiBjZW50dXJ5ID09PSBudWxsID8geWVhciA6IGNlbnR1cnkgKiAxMDAsXG4gICAgcmVzdERhdGVTdHJpbmc6IGRhdGVTdHJpbmcuc2xpY2UoKGNhcHR1cmVzWzFdIHx8IGNhcHR1cmVzWzJdKS5sZW5ndGgpXG4gIH07XG59XG5cbmZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlU3RyaW5nLCB5ZWFyKSB7XG4gIC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyXG4gIGlmICh5ZWFyID09PSBudWxsKSByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgdmFyIGNhcHR1cmVzID0gZGF0ZVN0cmluZy5tYXRjaChkYXRlUmVnZXgpOyAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgc3RyaW5nXG5cbiAgaWYgKCFjYXB0dXJlcykgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIHZhciBpc1dlZWtEYXRlID0gISFjYXB0dXJlc1s0XTtcbiAgdmFyIGRheU9mWWVhciA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbMV0pO1xuICB2YXIgbW9udGggPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzJdKSAtIDE7XG4gIHZhciBkYXkgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzNdKTtcbiAgdmFyIHdlZWsgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzRdKTtcbiAgdmFyIGRheU9mV2VlayA9IHBhcnNlRGF0ZVVuaXQoY2FwdHVyZXNbNV0pIC0gMTtcblxuICBpZiAoaXNXZWVrRGF0ZSkge1xuICAgIGlmICghdmFsaWRhdGVXZWVrRGF0ZSh5ZWFyLCB3ZWVrLCBkYXlPZldlZWspKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF5T2ZJU09XZWVrWWVhcih5ZWFyLCB3ZWVrLCBkYXlPZldlZWspO1xuICB9IGVsc2Uge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoMCk7XG5cbiAgICBpZiAoIXZhbGlkYXRlRGF0ZSh5ZWFyLCBtb250aCwgZGF5KSB8fCAhdmFsaWRhdGVEYXlPZlllYXJEYXRlKHllYXIsIGRheU9mWWVhcikpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICAgIH1cblxuICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgbW9udGgsIE1hdGgubWF4KGRheU9mWWVhciwgZGF5KSk7XG4gICAgcmV0dXJuIGRhdGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFyc2VEYXRlVW5pdCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPyBwYXJzZUludCh2YWx1ZSkgOiAxO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWUodGltZVN0cmluZykge1xuICB2YXIgY2FwdHVyZXMgPSB0aW1lU3RyaW5nLm1hdGNoKHRpbWVSZWdleCk7XG4gIGlmICghY2FwdHVyZXMpIHJldHVybiBOYU47IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB0aW1lXG5cbiAgdmFyIGhvdXJzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1sxXSk7XG4gIHZhciBtaW51dGVzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1syXSk7XG4gIHZhciBzZWNvbmRzID0gcGFyc2VUaW1lVW5pdChjYXB0dXJlc1szXSk7XG5cbiAgaWYgKCF2YWxpZGF0ZVRpbWUoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHJldHVybiBob3VycyAqIG1pbGxpc2Vjb25kc0luSG91ciArIG1pbnV0ZXMgKiBtaWxsaXNlY29uZHNJbk1pbnV0ZSArIHNlY29uZHMgKiAxMDAwO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWVVbml0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UoJywnLCAnLicpKSB8fCAwO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWV6b25lKHRpbWV6b25lU3RyaW5nKSB7XG4gIGlmICh0aW1lem9uZVN0cmluZyA9PT0gJ1onKSByZXR1cm4gMDtcbiAgdmFyIGNhcHR1cmVzID0gdGltZXpvbmVTdHJpbmcubWF0Y2godGltZXpvbmVSZWdleCk7XG4gIGlmICghY2FwdHVyZXMpIHJldHVybiAwO1xuICB2YXIgc2lnbiA9IGNhcHR1cmVzWzFdID09PSAnKycgPyAtMSA6IDE7XG4gIHZhciBob3VycyA9IHBhcnNlSW50KGNhcHR1cmVzWzJdKTtcbiAgdmFyIG1pbnV0ZXMgPSBjYXB0dXJlc1szXSAmJiBwYXJzZUludChjYXB0dXJlc1szXSkgfHwgMDtcblxuICBpZiAoIXZhbGlkYXRlVGltZXpvbmUoaG91cnMsIG1pbnV0ZXMpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHJldHVybiBzaWduICogKGhvdXJzICogbWlsbGlzZWNvbmRzSW5Ib3VyICsgbWludXRlcyAqIG1pbGxpc2Vjb25kc0luTWludXRlKTtcbn1cblxuZnVuY3Rpb24gZGF5T2ZJU09XZWVrWWVhcihpc29XZWVrWWVhciwgd2VlaywgZGF5KSB7XG4gIHZhciBkYXRlID0gbmV3IERhdGUoMCk7XG4gIGRhdGUuc2V0VVRDRnVsbFllYXIoaXNvV2Vla1llYXIsIDAsIDQpO1xuICB2YXIgZm91cnRoT2ZKYW51YXJ5RGF5ID0gZGF0ZS5nZXRVVENEYXkoKSB8fCA3O1xuICB2YXIgZGlmZiA9ICh3ZWVrIC0gMSkgKiA3ICsgZGF5ICsgMSAtIGZvdXJ0aE9mSmFudWFyeURheTtcbiAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpICsgZGlmZik7XG4gIHJldHVybiBkYXRlO1xufSAvLyBWYWxpZGF0aW9uIGZ1bmN0aW9uc1xuLy8gRmVicnVhcnkgaXMgbnVsbCB0byBoYW5kbGUgdGhlIGxlYXAgeWVhciAodXNpbmcgfHwpXG5cblxudmFyIGRheXNJbk1vbnRocyA9IFszMSwgbnVsbCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xuXG5mdW5jdGlvbiBpc0xlYXBZZWFySW5kZXgoeWVhcikge1xuICByZXR1cm4geWVhciAlIDQwMCA9PT0gMCB8fCB5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURhdGUoeWVhciwgbW9udGgsIGRhdGUpIHtcbiAgcmV0dXJuIG1vbnRoID49IDAgJiYgbW9udGggPD0gMTEgJiYgZGF0ZSA+PSAxICYmIGRhdGUgPD0gKGRheXNJbk1vbnRoc1ttb250aF0gfHwgKGlzTGVhcFllYXJJbmRleCh5ZWFyKSA/IDI5IDogMjgpKTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEYXlPZlllYXJEYXRlKHllYXIsIGRheU9mWWVhcikge1xuICByZXR1cm4gZGF5T2ZZZWFyID49IDEgJiYgZGF5T2ZZZWFyIDw9IChpc0xlYXBZZWFySW5kZXgoeWVhcikgPyAzNjYgOiAzNjUpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVdlZWtEYXRlKF95ZWFyLCB3ZWVrLCBkYXkpIHtcbiAgcmV0dXJuIHdlZWsgPj0gMSAmJiB3ZWVrIDw9IDUzICYmIGRheSA+PSAwICYmIGRheSA8PSA2O1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVRpbWUoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcbiAgaWYgKGhvdXJzID09PSAyNCkge1xuICAgIHJldHVybiBtaW51dGVzID09PSAwICYmIHNlY29uZHMgPT09IDA7XG4gIH1cblxuICByZXR1cm4gc2Vjb25kcyA+PSAwICYmIHNlY29uZHMgPCA2MCAmJiBtaW51dGVzID49IDAgJiYgbWludXRlcyA8IDYwICYmIGhvdXJzID49IDAgJiYgaG91cnMgPCAyNTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVUaW1lem9uZShfaG91cnMsIG1pbnV0ZXMpIHtcbiAgcmV0dXJuIG1pbnV0ZXMgPj0gMCAmJiBtaW51dGVzIDw9IDU5O1xufSIsImltcG9ydCBwcm9qZWN0IGZyb20gJy4vcHJvamVjdCc7XG5pbXBvcnQgdGFzayBmcm9tICcuL3Rhc2snO1xuaW1wb3J0IG5vdGUgZnJvbSAnLi9ub3RlJztcbmltcG9ydCBwYXJzZUlTTyBmcm9tICdkYXRlLWZucy9wYXJzZUlTTydcbmltcG9ydCB7IGl0IH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlJztcblxubGV0IHByb2plY3RzID0gW107XG5sZXQgdGFza3MgPSBbXTtcbmxldCBub3RlcyA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gcmV0cmlldmVEYXRhKCkge1xuICAgIC8vbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rhc2tzJywgbnVsbCk7XG4gICAgcmV0cmlldmVQcm9qZWN0cygpO1xuICAgIHJldHJpZXZlVGFza3MoKTtcbiAgICByZXRyaWV2ZU5vdGVzKCk7XG59XG5cbmZ1bmN0aW9uIHJldHJpZXZlUHJvamVjdHMoKSB7XG4gICAgY29uc29sZS5sb2coJ3JldHJpZXZpbmcgcHJvamVjdHMgZGF0YS4uLicpO1xuXG4gICAgbGV0IHByb2plY3RzRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byb2plY3RzJykpO1xuICAgIGlmKCFwcm9qZWN0c0RhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3Byb2plY3RzIGRhdGEgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnZm91bmQgcHJvamVjdHMgZGF0YTpcXG4nICsgcHJvamVjdHNEYXRhKTtcblxuICAgIHByb2plY3RzRGF0YS5mb3JFYWNoKHAgPT4ge1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdmb3VuZCBwcm9qZWN0IGRhdGE6XFxuJyArIHApO1xuXG4gICAgICAgIGxldCBuZXdQcm9qZWN0ID0gbmV3IHByb2plY3QocC50aXRsZSwgcC5kZXNjKTtcbiAgICAgICAgcC50YXNrcy5mb3JFYWNoKHQgPT4ge1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZm91bmQgdGFzayBkYXRhOlxcbicgKyB0KTtcblxuICAgICAgICAgICAgbmV3UHJvamVjdC5hZGRUYXNrKFxuICAgICAgICAgICAgICAgIG5ldyB0YXNrKFxuICAgICAgICAgICAgICAgICAgICB0Ll90aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgdC5fZGVzYyxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJU08odC5fZHVlKSxcbiAgICAgICAgICAgICAgICAgICAgdC5fcHJpb1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdhc3NlbWJsZWQgcHJvamVjdDpcXG4nICsgbmV3UHJvamVjdCk7XG5cbiAgICAgICAgcHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVUYXNrcygpIHtcbiAgICBsZXQgdGFza3NEYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGFza3MnKSk7XG4gICAgaWYoIXRhc2tzRGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZygndGFza3Mgbm90IGZvdW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ3Rhc2tzIGZvdW5kOlxcbicgKyB0YXNrc0RhdGEpO1xuICAgIHRhc2tzRGF0YS5mb3JFYWNoKHQgPT4ge1xuICAgICAgICB0YXNrcy5wdXNoKFxuICAgICAgICAgICAgbmV3IHRhc2soXG4gICAgICAgICAgICAgICAgdC5fdGl0bGUsXG4gICAgICAgICAgICAgICAgdC5fZGVzYyxcbiAgICAgICAgICAgICAgICBwYXJzZUlTTyh0Ll9kdWUpLFxuICAgICAgICAgICAgICAgIHQuX3ByaW9cbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKHRhc2tzKTtcbn1cblxuZnVuY3Rpb24gcmV0cmlldmVOb3RlcygpIHtcbiAgICBsZXQgbm90ZXNEYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbm90ZXMnKSk7XG4gICAgaWYoIW5vdGVzRGF0YSkgcmV0dXJuO1xuICAgIG5vdGVzRGF0YS5mb3JFYWNoKG4gPT4ge1xuICAgICAgICBub3Rlcy5wdXNoKFxuICAgICAgICAgICAgbi5fdGl0bGUsXG4gICAgICAgICAgICBuLl9kZXNjLFxuICAgICAgICAgICAgbi5fY29sb3JcbiAgICAgICAgKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3QobmV3UHJvamVjdCkge1xuICAgIGlmKG5ld1Byb2plY3QpIHtcbiAgICAgICAgcHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwcm9qZWN0cy5wdXNoKFxuICAgICAgICBuZXcgcHJvamVjdChcbiAgICAgICAgICAgICdOZXcgUHJvamVjdCcsIFxuICAgICAgICAgICAgJ0VudGVyIERlc2NyaXB0aW9uJ1xuICAgICAgICApXG4gICAgKTtcbiAgICBzYXZlUHJvamVjdHMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVQcm9qZWN0cygpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhuZXdUYXNrKSB7XG4gICAgY29uc29sZS5sb2coJ2NyZWF0aW5nIHRhc2suLicpO1xuICAgIGlmKG5ld1Rhc2spIHtcbiAgICAgICAgdGFza3MucHVzaChuZXdUYXNrKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0YXNrcy5wdXNoKFxuICAgICAgICBuZXcgdGFzayhcbiAgICAgICAgICAgICdOZXcgVGFzaycsXG4gICAgICAgICAgICAnRW50ZXIgRGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgbmV3IERhdGUoKSxcbiAgICAgICAgICAgIDFcbiAgICAgICAgKVxuICAgICk7XG4gICAgY29uc29sZS5sb2codGFza3MpO1xuICAgIHNhdmVUYXNrcygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVRhc2tzKCkge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0YXNrcycsIEpTT04uc3RyaW5naWZ5KHRhc2tzKSk7XG4gICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkodGFza3MpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5vdGUobmV3Tm90ZSkge1xuICAgIGlmKG5ld05vdGUpIHtcbiAgICAgICAgbm90ZXMucHVzaChuZXdOb3RlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBub3Rlcy5wdXNoKFxuICAgICAgICBuZXcgbm90ZShcbiAgICAgICAgICAgICdOZXcgTm90ZScsXG4gICAgICAgICAgICAnRW50ZXIgRGV0YWlscycsXG4gICAgICAgICAgICAnI0ZGRkZGRidcbiAgICAgICAgKVxuICAgICk7XG4gICAgc2F2ZU5vdGVzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlTm90ZXMoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ25vdGVzJywgSlNPTi5zdHJpbmdpZnkobm90ZXMpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tzKCkgeyByZXR1cm4gdGFza3M7IH1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb2plY3RzKCkgeyByZXR1cm4gcHJvamVjdHM7IH1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vdGVzKCkgeyByZXR1cm4gbm90ZXM7IH1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRhc2sodGFyZ2V0VGFzaykge1xuICAgIGNvbnN0IGluZGV4ID0gdGFza3MuaW5kZXhPZih0YXJnZXRUYXNrKTtcbiAgICBpZihpbmRleCA+IC0xKSB0YXNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHNhdmVUYXNrcygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlUHJvamVjdCh0YXJnZXRQcm9qZWN0KSB7XG4gICAgY29uc3QgaW5kZXggPSBwcm9qZWN0cy5pbmRleE9mKHRhcmdldFByb2plY3QpO1xuICAgIGlmKGluZGV4ID4gLTEpIHByb2plY3RzLnNwbGljZShpbmRleCwgMSk7XG4gICAgc2F2ZVByb2plY3RzKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb3RlKHRhcmdldE5vdGUpIHtcbiAgICBjb25zdCBpbmRleCA9IHByb2plY3RzLmluZGV4T2YodGFyZ2V0Tm90ZSk7XG4gICAgaWYoaW5kZXggPiAtMSkgcHJvamVjdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICBzYXZlTm90ZXMoKTtcbn0iLCJpbXBvcnQgdGFzayBmcm9tIFwiLi4vdGFza1wiO1xuaW1wb3J0ICogYXMgc3RvcmFnZSBmcm9tIFwiLi4vc3RvcmFnZVwiO1xuaW1wb3J0IHsgY29tcGFyZUFzYywgaXNUb2RheSB9IGZyb20gJ2RhdGUtZm5zJztcblxubGV0IHRpbWVzLCB0YXNrTGlzdCwgYWRkQnRuO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICBjcmVhdGVUaW1lcygpO1xuICAgIGNyZWF0ZVRhc2tMaXN0KCk7XG4gICAgY3JlYXRlQWRkQnRuKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkQ29udGVudCgpIHtcbiAgICBsZXQgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50Jyk7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZCh0aW1lcyk7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZCh0YXNrTGlzdCk7XG4gICAgY29udGVudC5hcHBlbmRDaGlsZChhZGRCdG4pO1xuICAgIHNldEFjdGl2ZVRpbWUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RheScpKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFza0xpc3QoKSB7XG4gICAgbGV0IG5ld1Rhc2tMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbmV3VGFza0xpc3QuaWQgPSAndGFzay1saXN0JztcbiAgICB0YXNrTGlzdCA9IG5ld1Rhc2tMaXN0O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBZGRCdG4oKSB7XG4gICAgbGV0IG5ld0FkZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIG5ld0FkZEJ0bi5pZCA9ICdhZGQtYnRuJztcbiAgICBuZXdBZGRCdG4udGV4dENvbnRlbnQgPSAnKyc7XG4gICAgbmV3QWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc3RvcmFnZS5jcmVhdGVUYXNrKCkpO1xuICAgIGFkZEJ0biA9IG5ld0FkZEJ0bjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGltZXMoKSB7XG4gICAgbGV0IG5ld1RpbWVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBuZXdUaW1lcy5pZCA9ICd0aW1lcyc7XG5cbiAgICBuZXdUaW1lcy5pbm5lckhUTUwgPSBcbiAgICAgICAgXCI8YnV0dG9uIGlkPSdkYXknIGNsYXNzPSd0aW1lJz5EYXk8L2J1dHRvbj5cIiArXG4gICAgICAgIFwiPGJ1dHRvbiBpZD0nd2VlaycgY2xhc3M9J3RpbWUnPldlZWs8L2J1dHRvbj5cIiArXG4gICAgICAgIFwiPGJ1dHRvbiBpZD0nbW9udGgnIGNsYXNzPSd0aW1lJz5Nb250aDwvYnV0dG9uPlwiICtcbiAgICAgICAgXCI8YnV0dG9uIGlkPSd5ZWFyJyBjbGFzcz0ndGltZSc+WWVhcjwvYnV0dG9uPlwiICtcbiAgICAgICAgXCI8YnV0dG9uIGlkPSdhbGwnIGNsYXNzPSd0aW1lJz5BbGw8L2J1dHRvbj5cIjtcblxuICAgIG5ld1RpbWVzLnF1ZXJ5U2VsZWN0b3IoJyNkYXknKVxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHNldEFjdGl2ZVRpbWUoZS50YXJnZXQpKTtcblxuICAgIG5ld1RpbWVzLnF1ZXJ5U2VsZWN0b3IoJyN3ZWVrJylcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBzZXRBY3RpdmVUaW1lKGUudGFyZ2V0KSk7XG5cbiAgICBuZXdUaW1lcy5xdWVyeVNlbGVjdG9yKCcjbW9udGgnKVxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHNldEFjdGl2ZVRpbWUoZS50YXJnZXQpKTtcblxuICAgIG5ld1RpbWVzLnF1ZXJ5U2VsZWN0b3IoJyN5ZWFyJylcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBzZXRBY3RpdmVUaW1lKGUudGFyZ2V0KSk7XG5cbiAgICBuZXdUaW1lcy5xdWVyeVNlbGVjdG9yKCcjYWxsJylcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiBzZXRBY3RpdmVUaW1lKGUudGFyZ2V0KSk7XG5cbiAgICB0aW1lcyA9IG5ld1RpbWVzO1xufVxuXG5mdW5jdGlvbiBzZXRBY3RpdmVUaW1lKGVsZW1lbnQpIHtcbiAgICBsZXQgdGltZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGltZScpO1xuICAgIHRpbWVzLmZvckVhY2goZSA9PiBlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIHJlbG9hZFRhc2tzKGVsZW1lbnQuaWQpO1xufVxuXG5mdW5jdGlvbiByZWxvYWRUYXNrcyh0aW1lKSB7XG4gICAgbGV0IHRhc2tzID0gc3RvcmFnZS5nZXRUYXNrcygpO1xuICAgIGxldCBwcm9qZWN0cyA9IHN0b3JhZ2UuZ2V0UHJvamVjdHMoKTtcblxuICAgIHRhc2tMaXN0LnRleHRDb250ZW50ID0gJyc7XG5cbiAgICBzd2l0Y2godGltZSkge1xuICAgICAgICBjYXNlICdkYXknOlxuICAgICAgICAgICAgbGV0IGRheVRhc2tzID1cbiAgICAgICAgICAgICAgICAgICAgdGFza3NcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzVG9kYXkoZS5kdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIuZHVlIC0gYS5kdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRheVRhc2tzLmZvckVhY2goc2FtcGxlID0+IHtcbiAgICAgICAgICAgICAgICB0YXNrTGlzdC5hcHBlbmRDaGlsZChjcmVhdGVUYXNrKHNhbXBsZSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2Vlayc6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW9udGgnOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3llYXInOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2FsbCc6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93ICdjb3VsZCBub3QgZmluZCcgKyB0aW1lICsgJyEnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFzayhzYW1wbGUpIHtcbiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9XG4gICAgICAgIFwiPGRpdiBjbGFzcz0nYmFzaWMnPlwiICtcbiAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0naW5mbyc+XCIgK1xuICAgICAgICAgICAgICAgIFwiPGlucHV0IHR5cGU9J3RleHQnPlwiICtcbiAgICAgICAgICAgICAgICBcIjxpbnB1dCB0eXBlPSdkYXRlJz5cIiArXG4gICAgICAgICAgICBcIjwvZGl2PlwiICtcbiAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nYWN0aW9ucyc+XCIgK1xuICAgICAgICAgICAgICAgIFwiPGlucHV0IHR5cGU9J2NoZWNrYm94JyBjbGFzcz0nZXhwYW5kJz5cIiArXG4gICAgICAgICAgICAgICAgXCI8YnV0dG9uIGNsYXNzPSdkZWxldGUnPuKcljwvYnV0dG9uPlwiICtcbiAgICAgICAgICAgIFwiPC9kaXY+XCIgKyBcbiAgICAgICAgXCI8L2Rpdj5cIiArXG4gICAgICAgIFwiPGRpdiBjbGFzcz0nZGV0YWlscz5cIiArXG4gICAgICAgICAgICBcIjxkaXYgY2xhc3M9J3ByaW9yaXRpZXMnPlwiICtcbiAgICAgICAgICAgICAgICBcIjxidXR0b24gY2xhc3M9J3ByaW9yaXR5Jz4xPC9idXR0b24+XCIgKyBcbiAgICAgICAgICAgICAgICBcIjxidXR0b24gY2xhc3M9J3ByaW9yaXR5Jz4yPC9idXR0b24+XCIgKyBcbiAgICAgICAgICAgICAgICBcIjxidXR0b24gY2xhc3M9J3ByaW9yaXR5Jz4zPC9idXR0b24+XCIgKyBcbiAgICAgICAgICAgICAgICBcIjxidXR0b24gY2xhc3M9J3ByaW9yaXR5Jz40PC9idXR0b24+XCIgKyBcbiAgICAgICAgICAgICAgICBcIjxidXR0b24gY2xhc3M9J3ByaW9yaXR5Jz41PC9idXR0b24+XCIgKyBcbiAgICAgICAgICAgIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgXCI8dGV4dGFyZWEgY2xhc3M9J2Rlc2NyaXB0aW9uJz48L3RleHRhcmVhPlwiICtcbiAgICAgICAgXCI8L2Rpdj5cIlxuXG4gICAgbGV0IGV4cGFuZCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZXhwYW5kJyk7XG4gICAgZXhwYW5kLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgIGlmKGUudGFyZ2V0LmNoZWNrZWQpIGNvbnNvbGUubG9nKCdleHBhbmQgY2hlY2tlZCcpO1xuICAgICAgICBlbHNlIGNvbnNvbGUubG9nKCdleHBhbmQgdW5jaGVja2VkJyk7XG4gICAgfSk7XG5cbiAgICBsZXQgZGVsZXRlVGFzayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZGVsZXRlJyk7XG4gICAgZGVsZXRlVGFzay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgc3RvcmFnZS5yZW1vdmVUYXNrKHNhbXBsZSk7XG4gICAgfSk7XG5cbiAgICBsZXQgZGV0YWlscyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZGV0YWlscycpO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbn0iLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpOyAvLyBDbG9uZSB0aGUgZGF0ZVxuXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgX3R5cGVvZihhcmd1bWVudCkgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNzdHJpbmctYXJndW1lbnRzXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIGRheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZkRheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImltcG9ydCBzdGFydE9mRGF5IGZyb20gXCIuLi9zdGFydE9mRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlUmlnaHQgLSB0aGUgc2Vjb25kIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKVxuICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgMDY6MDA6MDAgYW5kIDQgU2VwdGVtYmVyIDE4OjAwOjAwIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciBhbmQgNCBPY3RvYmVyIGluIHRoZSBzYW1lIGRheT9cbiAqIGNvbnN0IHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNCwgOSwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciwgMjAxNCBhbmQgNCBTZXB0ZW1iZXIsIDIwMTUgaW4gdGhlIHNhbWUgZGF5P1xuICogY29uc3QgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE1LCA4LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IGlzU2FtZURheSBmcm9tIFwiLi4vaXNTYW1lRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1RvZGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICogQHB1cmUgZmFsc2VcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIElzIHRoZSBnaXZlbiBkYXRlIHRvZGF5P1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdG8gY2hlY2tcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZSBpcyB0b2RheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRvZGF5IGlzIDYgT2N0b2JlciAyMDE0LCBpcyA2IE9jdG9iZXIgMTQ6MDA6MDAgdG9kYXk/XG4gKiBjb25zdCByZXN1bHQgPSBpc1RvZGF5KG5ldyBEYXRlKDIwMTQsIDksIDYsIDE0LCAwKSlcbiAqIC8vPT4gdHJ1ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVG9kYXkoZGlydHlEYXRlKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICByZXR1cm4gaXNTYW1lRGF5KGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSk7XG59IiwiaW1wb3J0ICogYXMgdGFza1VJIGZyb20gJy4vdGFza1VJJztcbmltcG9ydCAqIGFzIHByb2plY3RVSSBmcm9tICcuL3Byb2plY3RVSSc7XG5pbXBvcnQgKiBhcyBub3RlVUkgZnJvbSAnLi9ub3RlVUknO1xuXG5mdW5jdGlvbiBpbml0aWFsaXplVGFicygpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFza3MtdGFiJylcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgICAgICBzZXRBY3RpdmVUYWIoZS50YXJnZXQpO1xuICAgICAgICAgICAgdGFza1VJLmxvYWRDb250ZW50KCk7XG4gICAgICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0cy10YWInKVxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgIHNldEFjdGl2ZVRhYihlLnRhcmdldCk7XG4gICAgICAgICAgICBwcm9qZWN0VUkubG9hZENvbnRlbnQoKTtcbiAgICAgICAgfSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25vdGVzLXRhYicpXG4gICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICAgICAgc2V0QWN0aXZlVGFiKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIG5vdGVVSS5sb2FkQ29udGVudCgpO1xuICAgICAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0QWN0aXZlVGFiKGVsZW1lbnQpIHtcbiAgICBsZXQgdGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWInKTtcbiAgICB0YWJzLmZvckVhY2goZSA9PiB7ZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTt9KTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0aWFsaXplVUkoKSB7XG4gICAgaW5pdGlhbGl6ZVRhYnMoKTtcbiAgICBzZXRBY3RpdmVUYWIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rhc2tzLXRhYicpKTtcbiAgICB0YXNrVUkuaW5pdGlhbGl6ZSgpO1xuICAgIHRhc2tVSS5sb2FkQ29udGVudCgpO1xufSIsImZ1bmN0aW9uIGxvYWRDb250ZW50KCkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZW50JykudGV4dENvbnRlbnQgPSAnJztcbn1cblxuZXhwb3J0IHtcbiAgICBsb2FkQ29udGVudFxufTsiLCJmdW5jdGlvbiBsb2FkQ29udGVudCgpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGVudCcpLnRleHRDb250ZW50ID0gJyc7XG59XG5cbmV4cG9ydCB7XG4gICAgbG9hZENvbnRlbnRcbn07Il0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGl0bGUiLCJkZXNjIiwidGhpcyIsIl90aXRsZSIsIl9kZXNjIiwibmV3VGl0bGUiLCJfbmFtZSIsIm5ld0Rlc2MiLCJhZGRUYXNrIiwidGFzayIsInB1c2giLCJEYXRlIiwiZ2V0VGFza3MiLCJkdWUiLCJwcmlvIiwiX2R1ZSIsIl9wcmlvIiwibmV3RHVlIiwibmV3UHJpbyIsIk1hdGgiLCJwb3ciLCJtaWxsaXNlY29uZHNJbkhvdXIiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJ0b0ludGVnZXIiLCJkaXJ0eU51bWJlciIsIk5hTiIsIm51bWJlciIsIk51bWJlciIsImlzTmFOIiwiY2VpbCIsImZsb29yIiwicGFyc2VJU08iLCJhcmd1bWVudCIsIm9wdGlvbnMiLCJfb3B0aW9ucyRhZGRpdGlvbmFsRGkiLCJhcmd1bWVudHMiLCJhZGRpdGlvbmFsRGlnaXRzIiwiUmFuZ2VFcnJvciIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImRhdGUiLCJkYXRlU3RyaW5ncyIsInNwbGl0RGF0ZVN0cmluZyIsInBhcnNlWWVhclJlc3VsdCIsInBhcnNlWWVhciIsInBhcnNlRGF0ZSIsInJlc3REYXRlU3RyaW5nIiwieWVhciIsImdldFRpbWUiLCJvZmZzZXQiLCJ0aW1lc3RhbXAiLCJ0aW1lIiwicGFyc2VUaW1lIiwidGltZXpvbmUiLCJkaXJ0eURhdGUiLCJyZXN1bHQiLCJzZXRGdWxsWWVhciIsImdldFVUQ0Z1bGxZZWFyIiwiZ2V0VVRDTW9udGgiLCJnZXRVVENEYXRlIiwic2V0SG91cnMiLCJnZXRVVENIb3VycyIsImdldFVUQ01pbnV0ZXMiLCJnZXRVVENTZWNvbmRzIiwiZ2V0VVRDTWlsbGlzZWNvbmRzIiwicGFyc2VUaW1lem9uZSIsInBhdHRlcm5zIiwiZGF0ZVRpbWVEZWxpbWl0ZXIiLCJ0aW1lWm9uZURlbGltaXRlciIsImRhdGVSZWdleCIsInRpbWVSZWdleCIsInRpbWV6b25lUmVnZXgiLCJkYXRlU3RyaW5nIiwidGltZVN0cmluZyIsImFycmF5Iiwic3BsaXQiLCJ0ZXN0Iiwic3Vic3RyIiwidG9rZW4iLCJleGVjIiwicmVwbGFjZSIsInJlZ2V4IiwiUmVnRXhwIiwiY2FwdHVyZXMiLCJtYXRjaCIsInBhcnNlSW50IiwiY2VudHVyeSIsInNsaWNlIiwiaXNXZWVrRGF0ZSIsImRheU9mWWVhciIsInBhcnNlRGF0ZVVuaXQiLCJtb250aCIsImRheSIsIndlZWsiLCJkYXlPZldlZWsiLCJfeWVhciIsInZhbGlkYXRlV2Vla0RhdGUiLCJpc29XZWVrWWVhciIsInNldFVUQ0Z1bGxZZWFyIiwiZGlmZiIsImdldFVUQ0RheSIsInNldFVUQ0RhdGUiLCJkYXlPZklTT1dlZWtZZWFyIiwiZGF5c0luTW9udGhzIiwiaXNMZWFwWWVhckluZGV4IiwidmFsaWRhdGVEYXRlIiwidmFsaWRhdGVEYXlPZlllYXJEYXRlIiwibWF4IiwidmFsdWUiLCJob3VycyIsInBhcnNlVGltZVVuaXQiLCJtaW51dGVzIiwic2Vjb25kcyIsInZhbGlkYXRlVGltZSIsInBhcnNlRmxvYXQiLCJ0aW1lem9uZVN0cmluZyIsInNpZ24iLCJfaG91cnMiLCJ2YWxpZGF0ZVRpbWV6b25lIiwidGltZXMiLCJ0YXNrTGlzdCIsImFkZEJ0biIsInByb2plY3RzIiwidGFza3MiLCJub3RlcyIsInNhdmVUYXNrcyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiY29uc29sZSIsImxvZyIsInJlbW92ZVRhc2siLCJ0YXJnZXRUYXNrIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiX3R5cGVvZiIsIm9iaiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidG9EYXRlIiwiYXJnU3RyIiwid2FybiIsIkVycm9yIiwic3RhY2siLCJzdGFydE9mRGF5IiwiaXNTYW1lRGF5IiwiZGlydHlEYXRlTGVmdCIsImRpcnR5RGF0ZVJpZ2h0IiwiZGF0ZUxlZnRTdGFydE9mRGF5IiwiZGF0ZVJpZ2h0U3RhcnRPZkRheSIsImxvYWRDb250ZW50IiwiY29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFwcGVuZENoaWxkIiwic2V0QWN0aXZlVGltZSIsImVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJ0ZXh0Q29udGVudCIsImRheVRhc2tzIiwiZmlsdGVyIiwibm93IiwiaXNUb2RheSIsInNvcnQiLCJhIiwiYiIsInNhbXBsZSIsImNvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJhZGRFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiY2hlY2tlZCIsInJlbG9hZFRhc2tzIiwiaWQiLCJzZXRBY3RpdmVUYWIiLCJwcm9qZWN0c0RhdGEiLCJwYXJzZSIsImdldEl0ZW0iLCJwIiwibmV3UHJvamVjdCIsInQiLCJyZXRyaWV2ZVByb2plY3RzIiwidGFza3NEYXRhIiwicmV0cmlldmVUYXNrcyIsIm5vdGVzRGF0YSIsIm4iLCJfY29sb3IiLCJyZXRyaWV2ZU5vdGVzIiwibmV3VGltZXMiLCJjcmVhdGVUaW1lcyIsIm5ld1Rhc2tMaXN0IiwiY3JlYXRlVGFza0xpc3QiLCJuZXdBZGRCdG4iLCJjcmVhdGVBZGRCdG4iXSwic291cmNlUm9vdCI6IiJ9